<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /> <!-- Esto hace que la página sea responsive, ajustándose a diferentes tamaños de pantalla-->
        <meta name="description" content="MAGNIFIQUE es una tenda virtua an la cual se vendera ropa y accesorios para niños y adultos" />
        <meta name="author" content="D Yurani Mestizo Yule" />
        <title>Tienda virtual FamilyStyle</title>
      
        <!--iconos de redes sociales-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fuentes-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <!-- Bootstrap 5 CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

        <!--tema diseño-->
        <link href="css/stylesp.css" rel="stylesheet" />
        
    </head>
    <body id="page-top">
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand" href="#page-top"><img src="assets/img/logos/logoFamilyStyle1.png" alt="......" style="width: 250px; height: 80px;"/></a>
                <button class="btn-cerrar" onclick="window.history.back()">✖</button>

            </div>
        </nav>
        <div class="titulo-pagina text-center">
          <h1>Conjuntos para Bebe Niño</h1>
        </div>
        <div class="barra-superior"></div>
    
        <!-- contenido... 
         PRODUCTOS-->
        <section id="productos" class="py-5 bg-light">
            <div class="container">
              <!--seccion del filtro-->
              <div class="filtro-conjuntos mb-4">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <div class="row align-items-end">
                            <!-- Buscador por nombre/color -->
                            <div class="col-md-6 mb-3">
                                <label for="buscar-conjuntos" class="form-label">Buscar producto:</label>
                                <input type="text" id="buscar-conjuntos" class="form-control" placeholder="gris, beige, cafe, blanco, azul, rosa...">
                            </div>
                            
                            <!-- Filtro por precio -->
                            <div class="col-md-4 mb-3">
                                <label for="filtro-precio" class="form-label">Rango de precios:</label>
                                <select id="filtro-precio" class="form-select">
                                    <option value="">Todos los precios</option>
                                    <option value="30-50">$20.000 - $40.000</option>
                                    <option value="30-50">$30.000 - $50.000</option>
                                    <option value="50-100">$50.000 - $100.000</option>
                                    <option value="100-150">$100.000 - $150.000</option>
                                </select>
                            </div>
                            
                            <!-- Botón limpiar -->
                            <div class="col-md-2 mb-3">
                                <button id="limpiar-filtros" class="btn btn-outline-secondary w-100">
                                    <i class="fas fa-times"></i> Limpiar
                                </button>
                            </div>
                        </div>
                        
                        <!-- Contador -->
                        <div class="text-center mt-2">
                            <small id="contador-conjuntos" class="text-muted">Mostrando <span id="cantidad-productos">0</span> productos</small>
                        </div>
                    </div>
                </div>
              </div>
            </div>
          
              <div class="row">
                <!-- Fila 1 -->
                <div class="col-md-3 mb-4" data-nombre ="cafe, blaco, rosa" data-precio="50.000-100.000">
                  <div class="card h-100">
                    <div class="sticker">¡Oferta!</div>
                    <img src="assets/bebeNiño/camisetasBniño/camisasBB1.jpg" class="card-img-top" alt="Producto 1">
                    <div class="card-body text-center">
                      <h5 class="card-title">Set de 3 Camisas</h5>
                      <p class="card-text">Set de 3 camisetas 100% algodón, colores cafe, blanco y rosa, con estampados</p>
                      <p class="text-primary fw-bold">$50.000</p>
                      <button class="btn btn-success" onclick="agregarAlCarrito('Set de 3 Camisas', 'ssets/bebeNiño/camisetasBniño/camisasBB1.jpg', 50.000,'bebé')">Agregar al carrito</button>
                    </div>
                  </div>
                </div>
          
                <div class="col-md-3 mb-4", data-nombre="blanco, verde, rojo, gris" data-precio="30.000-50.000">
                  <div class="card h-100">
                    <div class="sticker">¡Oferta!</div>
                    <img src="assets/bebeNiño/camisetasBniño/camisasBB2.jpg" class="card-img-top" alt="Producto 2">
                    <div class="card-body text-center">
                      <h5 class="card-title">Set de 3 Camisillas</h5>
                      <p class="card-text">Set de 3 Camisillas 100% algodón, colores rojo/blanco, verde/blanco y gris</p>
                      <p class="text-primary fw-bold">$45.000</p>
                      <button class="btn btn-success" onclick="agregarAlCarrito('Set de 3 Camisillas', 'assets/bebeNiño/camisetasBniño/camisasBB2.jpg', 45.000,'bebé')">Agregar al carrito</button>
                    </div>
                  </div>
                </div>
          
                <div class="col-md-3 mb-4" data-nombre="naranja, blanco, azul" data-precio="50.000-100.000">
                  <div class="card h-100">
                    <div class="sticker">¡Oferta!</div>
                    <img src="assets/bebeNiño/camisetasBniño/camisasBB3.jpg" class="card-img-top" alt="Producto 3">
                    <div class="card-body text-center">
                      <h5 class="card-title">Set de 3 Camisetas animalitos</h5>
                      <p class="card-text"> Set de 3 camisetas 100% algodón, colores naranja, azul, blanco </p>
                      <p class="text-primary fw-bold">$55.000</p>
                      <button class="btn btn-success" onclick="agregarAlCarrito('Set de 3 Camisetas animalitos', 'assets/bebeNiño/camisetasBniño/camisasBB3.jpg', 55.000,'bebé')">Agregar al carrito</button>

                    </div>
                  </div>
                </div>

                <div class="col-md-3 mb-4" data-nombre="Beige" data-precio="20.000-40.000">
                  <div class="card h-100">
                    <img src="assets/bebeNiño/camisetasBniño/camisasBB4.jpg" class="card-img-top" alt="Producto 4">
                    <div class="card-body text-center">
                      <h5 class="card-title">Camiseta carro</h5>
                      <p class="card-text">Camiseta estapada 100% algodón</p>
                      <p class="text-primary fw-bold">$25.000</p>
                      <button class="btn btn-success" onclick="agregarAlCarrito('Camiseta carro', 'assets/bebeNiño/camisetasBniño/camisasBB4.jpg', 25.000,'bebé')">Agregar al carrito</button>

                    </div>
                  </div>
                </div>
                  
                <!-- Fila 2 -->
                


                <div class="col-md-3 mb-4"data-nombre=" blanco" data-precio="20.000-45.000">
                  <div class="card h-100">
                    <div class="sticker">¡Oferta!</div>
                    <img src="assets/bebeNiño/camisetasBniño/camisasBB5.jpg" class="card-img-top" alt="Producto 5">
                    <div class="card-body text-center">
                      <h5 class="card-title">Camiseta Ready for Adventure</h5>
                      <p class="card-text">camiseta estampada 100% algodón</p>
                      <p class="text-primary fw-bold">$28.000</p>
                      <button class="btn btn-success" onclick="agregarAlCarrito('Camiseta Ready for Adventure', 'assets/bebeNiño/camisetasBniño/camisasBB5.jpg', 28.000,'bebé')">Agregar al carrito</button>

                    </div>
                  </div>
                </div>
                <div class="col-md-3 mb-4", data-nombre="cafe" data-precio="20.000-45.000">
                  <div class="card h-100">
                    <img src="assets/bebeNiño/camisetasBniño/camisasBB6.jpg" class="card-img-top" alt="Producto 6">
                    <div class="card-body text-center">
                      <h5 class="card-title">Camiseta cafe</h5>
                      <p class="card-text">camiseta estampada 100% algodón</p>
                      <p class="text-primary fw-bold">$25.000</p>
                      <button class="btn btn-success" onclick="agregarAlCarrito('Camiseta cafe', 'assets/bebeNiño/camisetasBniño/camisasBB6.jpg', 25.000,'bebé')">Agregar al carrito</button>
                    </div>
                  </div>
                </div>

                <div class="col-md-3 mb-4" data-nombre=" aazul, blanco, negro" data-precio="50.000-100.000">
                  <div class="card h-100">
                    <div class="sticker">¡Oferta!</div>
                    <img src="assets/bebeNiño/camisetasBniño/camisasBB7.jpg" class="card-img-top" alt="Producto 7">
                    <div class="card-body text-center">
                      <h5 class="card-title">Set de 4 camisetas</h5>
                      <p class="card-text">Set de 4 camisetas 100% algodón, colores azul, negro, blanco y blanca con lineas</p>
                      <p class="text-primary fw-bold">$50.000</p>
                      <button class="btn btn-success" onclick="agregarAlCarrito('Set de 4 camisetas', 'assets/bebeNiño/camisetasBniño/camisasBB7.jpg', 50.000,'bebé')">Agregar al carrito</button>

                    </div>
                  </div>
                </div>
                <div class="col-md-3 mb-4" data-nombre="blanca" data-precio="50.000-100.000">
                  <div class="card h-100">

                    <img src="assets/bebeNiño/camisetasBniño/camisasBB8.jpg" class="card-img-top" alt="Producto 8">
                    <div class="card-body text-center">
                      <h5 class="card-title">Camiseta lest go</h5>
                      <p class="card-text">Camiseta con botones 100% algodón</p>
                      <p class="text-primary fw-bold">$30.000</p>
                      <button class="btn btn-success" onclick="agregarAlCarrito('Camiseta lest go', 'assets/bebeNiño/camisetasBniño/camisasBB8.jpg', 30.000,'bebé')">Agregar al carrito</button>
                    </div>
                  </div>
                </div>
              </div>

                <!-- Fila 3 -->
  
          </section>
          
        <a href="carrito.html" class="boton-carrito">
          🛒
        </a>  
      
 
        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- BARRA OBSCURA-->
        <script src="js/scripts.js"></script>

        <!-- muestra cuando agregamos al carrito-->
        <script>
          function agregarAlCarrito(nombre, imagen, precio, tipoTalla = 'bebé') {
            let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
        
            // Buscar si ya existe el producto
            const productoExistente = carrito.find(p => p.nombre === nombre);
        
            if (productoExistente) {
              productoExistente.cantidad += 1;
            } else {
    
              carrito.push({
                nombre: nombre,
                imagen: imagen,
                precio: precio,
                cantidad: 1,
                tipoTalla: tipoTalla,
                talla: tipoTalla === 'adulto' ? 'M' : tipoTalla === 'niño' ? '6' : '3-6M' // talla por defecto según tipo
                
              });
            }
        
            localStorage.setItem('carrito', JSON.stringify(carrito));
            alert(`"${nombre}" agregado al carrito`);
          }
        
        </script>
          
          <a href="carrito.html" class="boton-carrito">
            🛒
          </a>  
        <script>        
        
              document.addEventListener('DOMContentLoaded', function() {
                // Elementos del DOM (corregido el ID)
                const buscarInput = document.getElementById('buscar-conjuntos');
                const filtroPrecio = document.getElementById('filtro-precio'); // ID corregido
                const limpiarBtn = document.getElementById('limpiar-filtros');
                const contador = document.getElementById('cantidad-productos');
                const productos = document.querySelectorAll('[data-nombre]');

                // Función para normalizar precios (convertir "50.000-100.000" a 50-100)
                function normalizarRango(rango) {
                  return rango.replace(/\./g, '').replace(/\$/g, '').replace(/ /g, '').replace(/000/g, '');
                }

                function filtrarProductos() {
                  const terminoBusqueda = buscarInput.value.toLowerCase();
                  const rangoPrecioSeleccionado = filtroPrecio.value;
                  let productosVisibles = 0;

                  productos.forEach(producto => {
                    const nombre = producto.getAttribute('data-nombre').toLowerCase();
                    const precioProducto = normalizarRango(producto.getAttribute('data-precio'));
                    
                    // Verificar coincidencias
                    const coincideNombre = nombre.includes(terminoBusqueda) || terminoBusqueda === '';
                    const coincidePrecio = rangoPrecioSeleccionado === '' || 
                                        (rangoPrecioSeleccionado === precioProducto);
                    
                    if (coincideNombre && coincidePrecio) {
                      producto.style.display = 'block';
                      productosVisibles++;
                    } else {
                      producto.style.display = 'none';
                    }
                  });

                  contador.textContent = productosVisibles;
                }

                // Event listeners
                buscarInput.addEventListener('input', filtrarProductos);
                filtroPrecio.addEventListener('change', filtrarProductos);
                
                limpiarBtn.addEventListener('click', function() {
                  buscarInput.value = '';
                  filtroPrecio.value = '';
                  filtrarProductos();
                });

                // Inicializar
                filtrarProductos();
              });
          </script>
     </head>

<!-- Botón flotante del chatbot -->
<button id="chatbot-toggle">💬</button>

<!-- Ventana del chatbot -->
<div id="chatbot-box" style="display: none;">
  <div id="chatbot-header">Asistente</div>
  <div id="chatbot-messages"></div>
  <input type="text" id="chatbot-input" placeholder="Escribe algo..." />
</div>

<script>
  const toggleBtn = document.getElementById('chatbot-toggle');
  const chatbotBox = document.getElementById('chatbot-box');
  const input = document.getElementById('chatbot-input');
  const messages = document.getElementById('chatbot-messages');

  // Ocultar el chatbot al iniciar
  window.addEventListener('load', () => {
    chatbotBox.style.display = 'none';
  });

  // Mostrar/ocultar al hacer clic
  toggleBtn.addEventListener('click', () => {
    chatbotBox.style.display = chatbotBox.style.display === 'none' ? 'flex' : 'none';
  });

  // Capturar mensaje del usuario
  input.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && input.value.trim() !== '') {
      const userMsg = input.value.trim();
      addMessage('👤', userMsg);
      input.value = '';
      setTimeout(() => {
        const reply = responderSimulado(userMsg);
        addMessage('🤖', reply);
      }, 600);
    }
  });

  // Mostrar mensaje en pantalla
  function addMessage(sender, text) {
    const msg = document.createElement('div');
    msg.innerHTML = `<strong>${sender}</strong>: ${text}`;
    messages.appendChild(msg);
    messages.scrollTop = messages.scrollHeight;
  }

  // Respuestas simuladas básicas
  function responderSimulado(texto) {
    texto = texto.toLowerCase();
    if (texto.includes('hola')) return '¡Hola! ¿En qué puedo ayudarte?';
    if (texto.includes('precio')) return 'Puedes ver todos los precios en la tienda.';
    if (texto.includes('recomendados')) return 'Nuestras ofertas';
    if (texto.includes('ofertas')) return '¡Claro! contamos con muchas ofertas te encantaran 😊';
    if (texto.includes('talla')) return 'Tenemos tallas para adultos, niños y bebés.';
    if (texto.includes('gracias')) return '¡Con gusto! 😊';
    return 'Lo siento, aún estoy aprendiendo 🧠';
  }

  document.addEventListener("DOMContentLoaded", function() {
  // Seleccionamos todos los productos
  const productos = document.querySelectorAll(".col-md-3.mb-4");

  productos.forEach((producto, index) => {
    const productoId = `producto-${index}`;

    // Creamos el HTML para calificación y comentarios
    const ratingHTML = `
      <div class="rating-section mt-3">
        <label for="rating-${productoId}">Califica este producto:</label><br>
        <select class="form-select" id="rating-${productoId}">
          <option value="5">⭐⭐⭐⭐⭐</option>
          <option value="4">⭐⭐⭐⭐</option>
          <option value="3">⭐⭐⭐</option>
          <option value="2">⭐⭐</option>
          <option value="1">⭐</option>
        </select>

        <textarea class="form-control mt-2" id="comment-${productoId}" placeholder="Escribe tu comentario..."></textarea>
        <button class="btn btn-primary btn-sm mt-2" onclick="enviarComentario('${productoId}')">Enviar comentario</button>

        <button class="btn btn-secondary btn-sm mt-2" onclick="toggleComentarios('${productoId}')">Ver/Ocultar Comentarios</button>

        <div class="comentarios mt-3" id="comentarios-${productoId}" style="display: none;">
          <!-- Comentarios se cargarán aquí -->
        </div>
      </div>
    `;

    // Insertar el HTML en cada producto
    const cardBody = producto.querySelector(".card-body");
    cardBody.insertAdjacentHTML('beforeend', ratingHTML);

    // Cargar comentarios guardados
    cargarComentarios(productoId);
  });
});

// Función para enviar comentario
function enviarComentario(productoId) {
  const rating = document.getElementById(`rating-${productoId}`).value;
  const comment = document.getElementById(`comment-${productoId}`).value.trim();
  const comentariosDiv = document.getElementById(`comentarios-${productoId}`);

  if (comment === "") {
    alert("Por favor, escribe un comentario antes de enviarlo.");
    return;
  }

  // Crear nuevo comentario
  const nuevoComentario = {
    rating: rating,
    text: comment,
  };

  // Obtener comentarios existentes de localStorage
  let comentarios = JSON.parse(localStorage.getItem(`comentarios-${productoId}`)) || [];
  comentarios.push(nuevoComentario);

  // Guardar comentarios actualizados
  localStorage.setItem(`comentarios-${productoId}`, JSON.stringify(comentarios));

  // Mostrar nuevo comentario en la pantalla
  mostrarComentario(comentariosDiv, nuevoComentario);

  // Limpiar inputs
  document.getElementById(`comment-${productoId}`).value = "";
  document.getElementById(`rating-${productoId}`).value = "5";
}

// Función para mostrar un comentario individual
function mostrarComentario(contenedor, comentario) {
  const divComentario = document.createElement("div");
  divComentario.classList.add("comentario", "border", "rounded", "p-2", "mb-2");
  divComentario.innerHTML = `
    <div><strong>Calificación:</strong> ${"⭐".repeat(comentario.rating)}</div>
    <div><strong>Comentario:</strong> ${comentario.text}</div>
  `;
  contenedor.appendChild(divComentario);
}

// Función para cargar comentarios desde localStorage
function cargarComentarios(productoId) {
  const comentariosDiv = document.getElementById(`comentarios-${productoId}`);
  const comentarios = JSON.parse(localStorage.getItem(`comentarios-${productoId}`)) || [];

  comentarios.forEach((comentario) => {
    mostrarComentario(comentariosDiv, comentario);
  });
}

// Función para ocultar/desplegar comentarios
function toggleComentarios(productoId) {
  const comentariosDiv = document.getElementById(`comentarios-${productoId}`);
  if (comentariosDiv.style.display === "none") {
    comentariosDiv.style.display = "block";
  } else {
    comentariosDiv.style.display = "none";
  }
}
</script>

    </body>
</html>